<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boxology</title>

    <!-- Tailwind CSS (No installation needed) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* FIX: Forces scrollbar track to stay visible to prevent layout shift between Home and other pages */
        html {
            overflow-y: scroll;
        }

        body {
            font-family: 'Inter', sans-serif;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Custom scrollbar for cart */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #18181b;
        }

        ::-webkit-scrollbar-thumb {
            background: #3f3f46;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #52525b;
        }

        /* Validation Styles */
        input:invalid:not(:placeholder-shown),
        textarea:invalid:not(:placeholder-shown) {
            border-color: #ef4444 !important;
            background-color: rgba(239, 68, 68, 0.1);
        }

        .error-message {
            display: none;
            color: #ef4444;
            font-size: 0.75rem;
            margin-top: 4px;
            font-weight: 500;
        }

        input:invalid:not(:placeholder-shown)+.error-message,
        textarea:invalid:not(:placeholder-shown)+.error-message {
            display: block;
        }

        /* Nav Active Glow Effect */
        .nav-active {
            color: #FFC520 !important;
            filter: drop-shadow(0 0 5px rgba(255, 197, 32, 0.5));
        }
        .nav-active i, .nav-active svg {
            stroke: #FFC520;
        }
    </style>
</head>

<body class="bg-black text-white min-h-screen pb-20 selection:bg-[#FFC520] selection:text-black">

    <!-- NAVIGATION -->
    <nav class="sticky top-0 z-50 bg-black/90 backdrop-blur-md border-b border-zinc-800">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center h-16 relative">

                <!-- Mobile Menu Button (Left) - Enhanced Touch Area & Z-Index -->
                <button id="mobile-menu-btn" onclick="toggleMobileMenu()"
                    class="md:hidden relative z-50 text-zinc-300 hover:text-white p-3 -ml-3 focus:outline-none touch-manipulation">
                    <i data-lucide="menu" class="w-6 h-6 pointer-events-none"></i>
                </button>

                <!-- Logo (Centered on mobile, Left on desktop) -->
                <!-- Updated classes to reset positioning on desktop (md:) -->
                <div onclick="router('home')" class="group cursor-pointer select-none p-2 absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 md:static md:transform-none md:translate-x-0 md:translate-y-0 z-40" title="Boxology Home">
                    <div class="hover:scale-105 transition-transform duration-300 flex">
                        <!-- SVG Logo -->
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 841.9 595.3"
                            style="enable-background:new 0 0 841.9 595.3;" xml:space="preserve" class="h-10 w-auto">
                            <style type="text/css">
                                .st0 {
                                    fill: #FFFFFF;
                                }

                                .st1 {
                                    fill: #FFC520;
                                }
                            </style>
                            <rect width="841.9" height="595.3" fill="none" />
                            <path class="st0"
                                d="M133.2,442.4c0-66.7,0-133.5,0-200.2c11.2,0,22.5,0,33.7,0c0,8.5,0,17,0,25.6c56.9-28.9,113.8-57.9,170.6-86.8
                            c-11.5-32.3-10.8-58.8-9.2-73.5c1.6-15,3.4-31.2,14.3-47c11.6-16.8,26.9-23.3,52.1-33.7c13.7-5.6,69.8-28.7,107.7-12.9
                            c12.9,5.4,23,13.9,23,13.9c9.2,7.7,15,15.8,18.4,21.5c4.6,1.3,13.4,4.4,21.5,12.3c0,0,10.8,10.5,14.3,26.6
                            c5.1,23.6-10.6,44.1-20.4,57.2c-14.5,19.3-31.9,30.4-44.6,36.8c54.5,28.4,109,56.9,163.6,85.3c0-8.2,0-16.4,0-24.6
                            c10.2,0,20.4,0,30.6,0c0,67.1,0,134.2,0,201.2c-95.2,47.7-190.3,95.3-285.5,143C326.6,538.7,229.9,490.6,133.2,442.4z" />
                            <g>
                                <g>
                                    <path class="st1" d="M423.2,270v33c79.2,38.7,158.4,77.4,237.6,116.1c9.4-5,18.8-10.1,28.3-15.1
                                    C600.5,359.3,511.8,314.6,423.2,270z" />
                                    <path class="st1" d="M181.1,417.7c77.1-38.2,154.2-76.5,231.3-114.7v-29.7c-87.3,43.2-174.6,86.4-261.9,129.6
                                    C160.7,407.9,170.9,412.8,181.1,417.7z" />
                                    <path class="st1"
                                        d="M417.8,191.5c81,39.6,162,79.1,243,118.7c9.4-5,18.8-10.1,28.3-15.1c-89.3-45-178.6-89.9-267.9-134.9
                                    c-90.2,44.6-180.4,89.3-270.6,133.9c10.2,4.9,20.4,9.9,30.6,14.8C260,269.8,338.9,230.6,417.8,191.5z" />
                                    <path class="st1"
                                        d="M689.1,349.3c-89.3-45-178.6-89.9-267.9-134.9c-90.2,44.6-180.4,89.3-270.6,133.9
                                    c10.2,4.9,20.4,9.9,30.6,14.8C260,324,338.9,284.9,417.8,245.8c81,39.6,162,79.1,243,118.7C670.2,359.4,679.6,354.4,689.1,349.3z" />
                                </g>
                                <g>
                                    <path
                                        d="M500,373.9c-1.4-10.5-4.9-29.9-14-52.8c-5.9-14.8-12.5-26.6-17.8-35.2c-9.2,5.4-23.9,12.5-43.1,15.3
                                    c-36.8,5.5-65.8-7.9-76.2-13.3c-5.5,13.3-11.2,31-13.7,52.2c-1.4,12.1-1.5,23.1-1,32.6c1.9-11.1,4.8-26.8,9.7-45.5
                                    c3.5-13.5,8.1-29.2,8.7-29.1c0.7,0.2-5.9,21-9.8,47.7c-0.4,2.9-0.8,6.2-1.2,10.4c-1.7,19.1-0.2,34.9,1.6,46.1
                                    c25.4,12.7,50.9,25.3,76.3,38c27.5-13,55-26.1,82.6-39.2C502,394.3,501.5,384.9,500,373.9z" />
                                    <path
                                        d="M466.8,289.6c-43,23.2-87.2,26.3-111.5,6.2c-4.7-3.9-9.9-9.7-14-18.5c0.7-11.3,1.9-23.3,3.8-35.9
                                    c2.2-15.6,5.1-8.8,8.3-22.1c-0.9-1.7-2.6-5.8-2.1-11.2c0.5-5.4,3-9.2,4.2-10.8c-2.8-5.6-6.4-13.8-9.1-24.2
                                    c-12-45.8,5.2-88.4,2.8-88.9c-1-0.2-3.7,7-5.1,11.4c-2.7,8.5-3,15.1-3.6,15.1c-0.5,0-0.9-4.1-0.8-8c0.2-4.6,1.4-12.9,8.4-23.4
                                    c7.5-11.3,17.1-18,21.6-20.9C389,46.2,471.6,5,518.8,42.1c4.9,3.9,11.1,9.9,16.6,19.3c4.7,1.8,11.8,5,18.7,11
                                    c1.1,0.9,6.2,5.3,9.1,9.7c10.9,16.8-4,43.6-8.3,51.2c-3.5,6.2-11.5,20.2-27.3,31.1c-7.6,5.2-12.7,6.9-21.6,14.1
                                    c-8.9,7.2-14.8,14.5-18.4,19.4c-0.8,8.1-1.7,16.4-2.9,24.9C480.4,254.5,474.1,262.7,466.8,289.6z" />
                                </g>
                                <g>
                                    <g>
                                        <path class="st0" d="M379.4,205.6c-3.1-1-6.4-2.3-9.8-3.8c-3.9-1.7-7.5-3.5-10.6-5.2c1.1,1.6,4,5.1,9.1,7.3
                                        C373,205.9,377.4,205.8,379.4,205.6z" />
                                        <path class="st0" d="M372.1,225c-2.4-1.7-6-4.6-9-9.1c-3.5-5.1-4.8-10.1-5.3-13c-0.8,1.1-2.6,4.2-2.3,8.1c0,0.4,0.2,1.9,1,3.7
                                        c1.4,3.3,3.8,5.1,5.2,6.2C365.6,223.9,369.9,224.7,372.1,225z" />
                                        <path class="st0" d="M387.4,111.4c-1.9-2.2-6.3-6.7-13.6-9.1c-4.7-1.5-8.9-1.6-11.6-1.4c4.2,1,9.1,2.5,14.3,4.8
                                        C380.7,107.6,384.3,109.6,387.4,111.4z" />
                                        <path class="st0" d="M551,77.1c0.6-0.5-0.5-3.3-2.4-5.5c-3.5-4-9.7-6-11.4-4.3c-0.5,0.6-0.6,1.5-0.3,2.1c0.6,1.8,3.4,1.7,7,3.3
                                        C548.5,74.7,550.3,77.6,551,77.1z" />
                                        <path class="st0" d="M413.1,301c-8,0.4-18.5,0.2-30.4-1.9c-10.8-2-19.8-5-26.8-7.8c3.5,2.8,7.9,5.8,13.6,8.2
                                        C388.3,307.5,406.5,303,413.1,301z" />
                                        <path class="st0" d="M449.1,415.9c1.3,0.2,8.1-17.8,9.8-39.8c0.8-10.5,0.1-18.1-1-30.2c-1.7-19-3.2-12.5-8.5-36
                                        c-0.3-1.5-1.3-5.7-3.5-6.1c-1.2-0.2-2.4,0.9-2.7,1.2c-4.5,4.3,2.8,20.8,6.3,36.2c2.1,9,2.3,15.4,2.8,28
                                        C453.5,397.4,447.9,415.6,449.1,415.9z" />
                                        <path class="st0" d="M506.5,42c-2.9-2-7.5-4.7-13.8-6.3c-6.3-1.6-12.5-1.7-30.8,1.7c-13,2.4-19.4,3.6-28.5,6.2
                                        c-8,2.3-7.1,2.6-34,11.9c-13,4.5-14.5,4.9-16.1,5.2c-10.1,2.2-14.2,1.1-18.3,4.7c-5.3,4.7-5.5,13-4.9,13.2
                                        c0.3,0.1,1.1-2.1,3.8-5.9c0.9-1.3,4.5-6.4,5.5-5.9c1.1,0.5-1.3,6.5-0.4,6.9c0.6,0.2,1.9-2.6,4.9-5.5c3.8-3.7,7.8-5.2,8-4.9
                                        c0.2,0.3-4,2.4-5.2,6.7c-0.4,1.3-0.5,3.1,0.1,3.3c1.1,0.4,3-4.6,8.2-6.7c1.7-0.7,3.7-1.1,4-0.5c0.3,0.6-1.8,1.7-3.6,4.3
                                        c-2.3,3.2-2.8,6.5-2.5,6.6c0.5,0.2,3.9-7.8,6.5-7.3c0.5,0.1,0.8,0.5,1.4,0.5c1.6-0.1,2.9-2.7,2.6-2.9c-0.3-0.2-4.2,4.1-3.7,4.7
                                        c0.3,0.3,2-0.8,5.6-1.5c1.6-0.3,2-0.2,2.1-0.1c0.3,0.5-1.1,1.4-2.8,3.6c-0.4,0.5-2.6,3.3-2.1,3.7c0.5,0.5,3.2-1.6,6.9-3.6
                                        c0,0,3.3-1.8,10.3-4.2c9-3.1,21.9-3.9,26.3-4.3c21.8-1.7,22.7-7.6,57.3-16.9c1.7-0.5,9-2.4,8.9-4.7c0-1.9-4.8-3.2-4.6-3.7
                                        C497.8,40.1,499.8,40.3,506.5,42z" />
                                        <path class="st0"
                                            d="M353,86.2c1.5,0.2,4.9-12.6,3.5-13.2c-0.7-0.3-2.5,2.2-3.4,4.2C351.3,81.3,352.2,86.1,353,86.2z" />
                                        <path class="st0"
                                            d="M398.4,82.2c0.9,0.6,8.5-7.2,7.8-8c-0.3-0.4-2.6,0.8-3.9,1.9C399.4,78.3,397.9,81.8,398.4,82.2z" />
                                    </g>
                                </g>
                                <g>
                                    <path
                                        d="M691.4,324c-0.8-9.6-1.5-19.3-2.3-28.9c-89,44.1-178,88.1-267,132.2c-90.5-44.4-181.1-88.8-271.6-133.2
                                    c0,10.6,0,21.3,0,31.9c90.3,44.5,180.6,89,270.9,133.5C511.4,414.3,601.4,369.2,691.4,324z" />
                                    <path
                                        d="M689.1,349.3c-89,44.1-178,88.1-267,132.2c-90.5-44.4-181.1-88.8-271.6-133.2c0,10.6,0,21.3,0,31.9
                                    c90.3,44.5,180.6,89,270.9,133.5c90-45.1,180-90.3,270-135.5C690.6,368.6,689.8,359,689.1,349.3z" />
                                    <path
                                        d="M150.5,434.8c88.3,43.5,176.7,87.1,265,130.6v-32.5c-88.4-43.3-176.7-86.6-265-130C150.5,413.6,150.5,424.2,150.5,434.8z" />
                                    <path d="M689.1,403.9c-87.6,43.4-175.1,86.7-262.7,130.1v31.9c88.4-44.3,176.7-88.7,265.1-133
                                    C690.6,423.2,689.8,413.6,689.1,403.9z" />
                                </g>
                                <g>
                                    <path d="M686,258.5v177.3c3.6-1.8,7.2-3.6,10.8-5.4V258.5H686z" />
                                </g>
                                <g>
                                    <path
                                        d="M155.9,437.5c-3.6-2-7.2-4.1-10.8-6.1c0-57.7,0-115.3,0-173h10.8C155.9,318.1,155.9,377.8,155.9,437.5z" />
                                </g>
                                <path class="st1"
                                    d="M415.6,389.9v143v32.5c2,1,3.9,1.9,5.9,2.9c1.6-0.8,3.3-1.6,4.9-2.5V534V389.9H415.6z" />
                            </g>
                        </svg>
                    </div>
                </div>

                <!-- Right Side: Mobile Cart + Desktop Nav -->
                <!-- Pushed to the right using ml-auto -->
                <div class="flex items-center gap-4 ml-auto">
                    <!-- Mobile Cart Button (New) -->
                    <button onclick="router('cart')" class="md:hidden p-2 text-zinc-300 hover:text-[#FFC520] transition relative" title="Cart" data-nav-target="cart">
                        <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                        <!-- Reusing ID 'cart-badge-mobile' here so existing JS works -->
                        <span id="cart-badge-mobile"
                            class="hidden absolute -top-1 -right-1 bg-[#FFC520] text-black text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">0</span>
                    </button>

                    <!-- Desktop Nav -->
                    <div class="hidden md:flex items-center gap-8">
                        <button onclick="router('home')" class="p-2 text-zinc-300 hover:text-[#FFC520] transition"
                            title="Home" data-nav-target="home">
                            <i data-lucide="home" class="w-5 h-5"></i>
                        </button>
                        <button onclick="router('shop')" class="p-2 text-zinc-300 hover:text-[#FFC520] transition"
                            title="Shop Gear" data-nav-target="shop">
                            <i data-lucide="shirt" class="w-5 h-5"></i>
                        </button>
                        <button onclick="router('bundles')" class="p-2 text-zinc-300 hover:text-[#FFC520] transition"
                            title="Training Bundles" data-nav-target="bundles">
                            <!-- Custom Boxing Glove SVG -->
                            <svg viewBox="0 0 122.88 118.71" class="w-5 h-5 fill-current" stroke="currentColor"
                                stroke-width="6">
                                <g>
                                    <path
                                        d="M51.31,31.23c2.55-4.65,5.15-8.64,7.79-12c0.1-0.13,0.2-0.25,0.3-0.38c3.19-5.52,5.43-11.01,2.84-12.81l0,0 c-1.68-1.16-4.12-1.2-6.67-0.64c-3.81,0.83-7.67,2.93-9.99,4.82c-3.04,2.47-5.75,5.62-8.07,8.98c-2.76,4.01-4.93,8.28-6.38,12.04 c-1.48,3.85-2.54,7.96-3.15,12.36c-0.59,4.29-0.75,8.85-0.44,13.69c2.83,7.42,6.63,14,11.44,19.69c0.36,0.41,0.72,0.81,1.09,1.21 c5.54,5.96,12.31,10.72,20.21,14.36l0,0c0.09,0.04,0.18,0.09,0.27,0.15c0.95-0.07,1.92-0.16,2.9-0.28c1.7-0.21,3.35-0.48,4.96-0.81 c5.3-1.09,9.78-2.69,14.01-4.83c4.28-2.16,8.34-4.88,12.77-8.15c2.16-1.6,4.31-3.32,6.44-5.17c2.12-1.84,4.14-3.75,6.05-5.74l0,0 c4.16-4.7,7.01-9.24,8.61-13.63c1.55-4.26,1.91-8.38,1.11-12.38c-0.74-3.73-3.16-8.11-6.22-12.32c-3.91-5.38-8.82-10.38-12.66-13.4 c-1.65-1.3-3.28-2.39-4.88-3.27c-5.18-2.83-10.31-3.58-15.3-2.11c-5.09,1.5-10.16,5.29-15.11,11.53c-2.06,3.59-4.37,6.95-6.13,9.51 c-0.48,0.7-0.9,1.31-1.55,2.3c-0.77,1.16-2.34,1.48-3.5,0.71C50.93,33.91,50.6,32.38,51.31,31.23L51.31,31.23z M19.5,66.5 c-0.17,6.41,0.83,9.06,5.6,15.25c1.68,2.18,3.51,4.36,5.5,6.54c3.73,2.86,4.32,5.71,1.4,8.57l-1.4,1.56 c-2.52,1.56-5.31,1.85-9.04-2.34l-5.54-7.03c-2.49-3.16-5.72-6.19-5.96-10.43c-0.04-0.79-0.01-1.6,0.09-2.44l-2.43,2.51 c-0.79,1-1.43,2.03-1.88,3.1C5.39,82.82,5.12,83.89,5.06,85c-0.21,3.71,3.45,9.41,8.27,14.78c5.86,6.53,13.25,12.32,17.65,13.58 c6.96,2.01,14.64-6.88,21.08-14.32c0.88-1.02,1.74-2.01,2.58-2.96c-7.18-3.96-13.31-8.84-18.42-14.59 c-0.42-0.47-0.83-0.94-1.23-1.42c-4.53-5.21-8.26-11.21-11.14-18.04L19.5,66.5L19.5,66.5z M59.89,97.79 c-1.27,1.37-2.62,2.93-4.03,4.56c-7.4,8.56-16.22,18.76-26.28,15.87c-5.24-1.51-13.61-7.92-20.02-15.07 C3.96,96.9-0.28,89.91,0.01,84.72c0.1-1.74,0.51-3.39,1.18-4.95c0.65-1.51,1.54-2.95,2.64-4.32l0,0c0.05-0.06,0.1-0.12,0.16-0.18 l18.43-19.06c-0.22-4.66-0.02-9.1,0.56-13.31c0.66-4.75,1.82-9.23,3.44-13.46c1.59-4.12,3.95-8.78,6.93-13.11 c2.57-3.72,5.61-7.24,9.04-10.03c2.82-2.29,7.5-4.84,12.11-5.84c3.79-0.83,7.62-0.64,10.61,1.44l0.01,0l0,0 c2.78,1.93,3.45,4.96,2.9,8.44c2.92-2.16,5.89-3.68,8.91-4.56c6.33-1.86,12.74-0.96,19.13,2.53c1.89,1.03,3.76,2.27,5.59,3.72 c4.15,3.27,9.43,8.64,13.63,14.41c3.44,4.73,6.19,9.79,7.09,14.31c0.97,4.89,0.55,9.91-1.33,15.06c-1.82,5-5.02,10.11-9.65,15.33 c-0.02,0.03-0.05,0.05-0.07,0.08l0,0c-2.09,2.16-4.21,4.17-6.37,6.05c-2.15,1.87-4.4,3.67-6.75,5.41c-4.65,3.44-8.94,6.3-13.5,8.6 c-4.61,2.33-9.49,4.08-15.27,5.27c-1.83,0.38-3.63,0.67-5.37,0.89C62.7,97.59,61.31,97.71,59.89,97.79L59.89,97.79z" />
                        </g>
                    </svg>
                </button>
                <button onclick="router('contact')" class="p-2 text-zinc-300 hover:text-[#FFC520] transition"
                    title="Contact" data-nav-target="contact">
                    <i data-lucide="mail" class="w-5 h-5"></i>
                </button>
                <button onclick="router('cart')" class="p-2 text-zinc-300 hover:text-[#FFC520] transition relative"
                    title="Cart" data-nav-target="cart">
                    <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                    <span id="cart-badge-desktop"
                        class="hidden absolute -top-1 -right-1 bg-[#FFC520] text-black text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">0</span>
                </button>
            </div>
        </div>
    </nav>

            <!-- Mobile Menu Sidebar (Vertical) -->
            <div id="mobile-menu"
            class="hidden md:hidden fixed top-16 left-0 w-64 h-[calc(100vh-4rem)] bg-zinc-900 border-r border-zinc-800 z-40 shadow-xl overflow-y-auto">
            <div class="flex flex-col p-4 space-y-2">
                <button onclick="router('home'); toggleMobileMenu()"
                    class="flex items-center gap-3 p-3 text-zinc-300 hover:bg-zinc-800 rounded transition" data-nav-target="home">
                    <i data-lucide="home" class="w-5 h-5"></i> Home
                </button>
                <button onclick="router('shop'); toggleMobileMenu()"
                    class="flex items-center gap-3 p-3 text-zinc-300 hover:bg-zinc-800 rounded transition" data-nav-target="shop">
                    <i data-lucide="shirt" class="w-5 h-5"></i> Shop
                </button>
                <button onclick="router('bundles'); toggleMobileMenu()"
                    class="flex items-center gap-3 p-3 text-zinc-300 hover:bg-zinc-800 rounded transition" data-nav-target="bundles">
                    <!-- Updated with the same SVG as desktop -->
                    <svg viewBox="0 0 122.88 118.71" class="w-5 h-5 fill-current" stroke="currentColor" stroke-width="6">
                        <g>
                            <path d="M51.31,31.23c2.55-4.65,5.15-8.64,7.79-12c0.1-0.13,0.2-0.25,0.3-0.38c3.19-5.52,5.43-11.01,2.84-12.81l0,0 c-1.68-1.16-4.12-1.2-6.67-0.64c-3.81,0.83-7.67,2.93-9.99,4.82c-3.04,2.47-5.75,5.62-8.07,8.98c-2.76,4.01-4.93,8.28-6.38,12.04 c-1.48,3.85-2.54,7.96-3.15,12.36c-0.59,4.29-0.75,8.85-0.44,13.69c2.83,7.42,6.63,14,11.44,19.69c0.36,0.41,0.72,0.81,1.09,1.21 c5.54,5.96,12.31,10.72,20.21,14.36l0,0c0.09,0.04,0.18,0.09,0.27,0.15c0.95-0.07,1.92-0.16,2.9-0.28c1.7-0.21,3.35-0.48,4.96-0.81 c5.3-1.09,9.78-2.69,14.01-4.83c4.28-2.16,8.34-4.88,12.77-8.15c2.16-1.6,4.31-3.32,6.44-5.17c2.12-1.84,4.14-3.75,6.05-5.74l0,0 c4.16-4.7,7.01-9.24,8.61-13.63c1.55-4.26,1.91-8.38,1.11-12.38c-0.74-3.73-3.16-8.11-6.22-12.32c-3.91-5.38-8.82-10.38-12.66-13.4 c-1.65-1.3-3.28-2.39-4.88-3.27c-5.18-2.83-10.31-3.58-15.3-2.11c-5.09,1.5-10.16,5.29-15.11,11.53c-2.06,3.59-4.37,6.95-6.13,9.51 c-0.48,0.7-0.9,1.31-1.55,2.3c-0.77,1.16-2.34,1.48-3.5,0.71C50.93,33.91,50.6,32.38,51.31,31.23L51.31,31.23z M19.5,66.5 c-0.17,6.41,0.83,9.06,5.6,15.25c1.68,2.18,3.51,4.36,5.5,6.54c3.73,2.86,4.32,5.71,1.4,8.57l-1.4,1.56 c-2.52,1.56-5.31,1.85-9.04-2.34l-5.54-7.03c-2.49-3.16-5.72-6.19-5.96-10.43c-0.04-0.79-0.01-1.6,0.09-2.44l-2.43,2.51 c-0.79,1-1.43,2.03-1.88,3.1C5.39,82.82,5.12,83.89,5.06,85c-0.21,3.71,3.45,9.41,8.27,14.78c5.86,6.53,13.25,12.32,17.65,13.58 c6.96,2.01,14.64-6.88,21.08-14.32c0.88-1.02,1.74-2.01,2.58-2.96c-7.18-3.96-13.31-8.84-18.42-14.59 c-0.42-0.47-0.83-0.94-1.23-1.42c-4.53-5.21-8.26-11.21-11.14-18.04L19.5,66.5L19.5,66.5z M59.89,97.79 c-1.27,1.37-2.62,2.93-4.03,4.56c-7.4,8.56-16.22,18.76-26.28,15.87c-5.24-1.51-13.61-7.92-20.02-15.07 C3.96,96.9-0.28,89.91,0.01,84.72c0.1-1.74,0.51-3.39,1.18-4.95c0.65-1.51,1.54-2.95,2.64-4.32l0,0c0.05-0.06,0.1-0.12,0.16-0.18 l18.43-19.06c-0.22-4.66-0.02-9.1,0.56-13.31c0.66-4.75,1.82-9.23,3.44-13.46c1.59-4.12,3.95-8.78,6.93-13.11 c2.57-3.72,5.61-7.24,9.04-10.03c2.82-2.29,7.5-4.84,12.11-5.84c3.79-0.83,7.62-0.64,10.61,1.44l0.01,0l0,0 c2.78,1.93,3.45,4.96,2.9,8.44c2.92-2.16,5.89-3.68,8.91-4.56c6.33-1.86,12.74-0.96,19.13,2.53c1.89,1.03,3.76,2.27,5.59,3.72 c4.15,3.27,9.43,8.64,13.63,14.41c3.44,4.73,6.19,9.79,7.09,14.31c0.97,4.89,0.55,9.91-1.33,15.06c-1.82,5-5.02,10.11-9.65,15.33 c-0.02,0.03-0.05,0.05-0.07,0.08l0,0c-2.09,2.16-4.21,4.17-6.37,6.05c-2.15,1.87-4.4,3.67-6.75,5.41c-4.65,3.44-8.94,6.3-13.5,8.6 c-4.61,2.33-9.49,4.08-15.27,5.27c-1.83,0.38-3.63,0.67-5.37,0.89C62.7,97.59,61.31,97.71,59.89,97.79L59.89,97.79z" />
                        </g>
                    </svg> Bundles
                </button>
                <button onclick="router('contact'); toggleMobileMenu()"
                    class="flex items-center gap-3 p-3 text-zinc-300 hover:bg-zinc-800 rounded transition" data-nav-target="contact">
                    <i data-lucide="mail" class="w-5 h-5"></i> Contact
                </button>
                <button onclick="router('cart'); toggleMobileMenu()"
                    class="flex items-center gap-3 p-3 text-zinc-300 hover:bg-zinc-800 rounded transition justify-between" data-nav-target="cart">
                    <div class="flex items-center gap-3">
                        <i data-lucide="shopping-cart" class="w-5 h-5"></i> Cart
                    </div>
                    <span id="cart-badge-mobile"
                        class="hidden bg-[#FFC520] text-black text-xs font-bold px-2 py-0.5 rounded-full">0</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT CONTAINER -->
    <main id="app-container" class="fade-in">
        <!-- Content injected via JavaScript -->
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-zinc-900 mt-20 py-8 text-center text-zinc-600 text-sm">
        <p>&copy; 2026 Boxology. All rights reserved.</p>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA ---
        const WHATSAPP_NUMBER = "96171711721"; // REPLACE THIS WITH YOUR NUMBER
        const CURRENCY = "$";

        const PRODUCTS = [
            { 
                id: 'p1', 
                name: 'Boxology Hoodie', 
                price: 0, 
                category: 'gear', 
                description: 'description', 
                colors: ['Black', 'White', 'Pink'], 
                icon: 'shirt',
                images: {
                    'Black': ['./HoodieImages/Pic1.jpg', './HoodieImages/Pic1(1).jpg'],
                    'White': ['./HoodieImages/Pic2.jpg', './HoodieImages/Pic2(2).jpg'],
                    'Pink': ['./HoodieImages/Pic3.jpg', './HoodieImages/Pic3(3).jpg']
                }
            },
            { 
                id: 'p2', 
                name: 'Boxology T-Shirt', 
                price: 0, 
                category: 'gear', 
                description: 'description', 
                colors: ['Black', 'White', 'Pink'], 
                icon: 'shirt',
                images: {
                    'Black': ['./TshirtImages/Pic1.jpg', './TshirtImages/Pic1(1).jpg'],
                    'White': ['./TshirtImages/Pic2.jpg', './TshirtImages/Pic2(2).jpg'],
                    'Pink': ['./TshirtImages/Pic3.jpg', './TshirtImages/Pic3(3).jpg']
                } 
            },
            { 
                id: 'p3', 
                name: 'Pro Hand Wraps', 
                price: 0, 
                category: 'gear', 
                description: 'description', 
                colors: ['Black', 'White', 'Pink'], 
                icon: 'shield',
                images: {
                    'Black': ['./HandWrapsImages/Pic1.jpg'],
                    'White': ['./HandWrapsImages/Pic2.jpg'],
                    'Pink': ['./HandWrapsImages/Pic3.jpg']
                }
            }
        ];

        const BUNDLES = [
            { id: 'b1', name: 'Single Session', price: 20, category: 'membership', description: 'Pay per session.', sessions: 1, icon: 'dumbbell' },
            { id: 'b2', name: '8 Sessions', price: 120, oldPrice: 160, category: 'membership', description: 'Commit to consistency.', sessions: 8, icon: 'dumbbell' },
            { id: 'b3', name: '12 Sessions', price: 200, oldPrice: 240, category: 'membership', description: 'Take it to the next level.', sessions: 12, icon: 'dumbbell' },
            { id: 'b4', name: '20 Sessions', price: 320, oldPrice: 400, category: 'membership', description: 'Maximum transformation.', sessions: 20, icon: 'dumbbell' }
        ];

        // --- STATE ---
        let cart = [];
        let currentView = 'home';
        let lastOrder = null;

        // --- APP INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            loadCart(); // Load saved cart
            router('home');
            lucide.createIcons();

            // Close mobile menu when clicking outside
            document.addEventListener('click', (e) => {
                const menu = document.getElementById('mobile-menu');
                const btn = document.getElementById('mobile-menu-btn');

                // If menu is open, and click is NOT on menu and NOT on button, close it
                if (menu && !menu.classList.contains('hidden') && !menu.contains(e.target) && (!btn || !btn.contains(e.target))) {
                    menu.classList.add('hidden');
                }
            });
        });

        // --- LOCAL STORAGE HELPERS ---
        function saveCart() {
            localStorage.setItem('boxology_cart', JSON.stringify(cart));
            updateCartBadge();
        }

        function loadCart() {
            const savedCart = localStorage.getItem('boxology_cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartBadge();
            }
        }

        function saveCheckoutInput(key, value) {
            const info = JSON.parse(localStorage.getItem('boxology_checkout_info') || '{}');
            info[key] = value;
            localStorage.setItem('boxology_checkout_info', JSON.stringify(info));
        }

        function getCheckoutInfo() {
            return JSON.parse(localStorage.getItem('boxology_checkout_info') || '{}');
        }

        function clearCheckoutInfo() {
            localStorage.removeItem('boxology_checkout_info');
        }

        // --- ROUTING ---
        function router(view) {
            currentView = view;
            updateActiveNav(view); // Update nav highlights based on view

            const container = document.getElementById('app-container');
            window.scrollTo(0, 0);

            // Remove previous animation to re-trigger
            container.classList.remove('fade-in');
            void container.offsetWidth; // Trigger reflow
            container.classList.add('fade-in');

            if (view === 'home') renderHome();
            else if (view === 'shop') renderShop();
            else if (view === 'bundles') renderBundles();
            else if (view === 'contact') renderContact();
            else if (view === 'cart') renderCart();
            else if (view === 'checkout') renderCheckout();
            else if (view === 'success') renderSuccess();

            lucide.createIcons();
        }

        function updateActiveNav(view) {
            // 1. Reset all nav items to default state
            document.querySelectorAll('[data-nav-target]').forEach(el => {
                el.classList.remove('nav-active');
                el.classList.add('text-zinc-300'); // Ensure default color is applied
                el.classList.remove('text-[#FFC520]'); // Remove any manual active color classes if present
            });

            // 2. Set active class on target view
            document.querySelectorAll(`[data-nav-target="${view}"]`).forEach(el => {
                el.classList.remove('text-zinc-300'); // Remove default gray
                el.classList.add('nav-active'); // Add active glow class
            });
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            if (!menu) return; // FIX: Added safety check to prevent error if menu is missing
            menu.classList.toggle('hidden');
            lucide.createIcons();
        }

        // --- RENDER FUNCTIONS ---

        function renderHome() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="relative min-h-[calc(100vh-64px)] flex items-center justify-center bg-black overflow-hidden">
                    <div class="absolute inset-0 z-0">
                            <img src="./Images/Pic4.png" class="w-full h-full object-cover opacity-40">
                        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/60 to-transparent"></div>
                    </div>
                    
                    <div class="relative z-10 container mx-auto px-4 grid md:grid-cols-2 gap-8 md:gap-12 items-center py-12 md:py-0">
                        <!-- Left Side: Text Content & Info -->
                        <div class="text-left animate-fade-in flex flex-col justify-center h-full">
                            <h1 class="text-5xl sm:text-6xl md:text-8xl font-black text-white italic tracking-tighter mb-4 md:mb-6 leading-tight">
                                Box<span class="text-[#FFC520]">ology</span>
                            </h1>
                            <p class="text-lg md:text-xl text-gray-300 mb-8 max-w-lg leading-relaxed">
                                The science of mind and movement.
                            </p>
                             <div class="flex flex-row gap-4 w-full md:w-auto">
                                <button onclick="router('bundles')" class="flex-1 md:flex-none px-6 md:px-8 py-4 bg-[#FFC520] text-black font-bold rounded hover:bg-[#e0ac1c] transition shadow-lg shadow-yellow-900/20 active:scale-95 text-center">START TRAINING</button>
                                <button onclick="router('shop')" class="flex-1 md:flex-none px-6 md:px-8 py-4 bg-white text-black font-bold rounded hover:bg-zinc-200 transition shadow-lg active:scale-95 text-center">GET GEAR</button>
                            </div>
                            
                            <!-- Info Grid -->
                            <div class="mt-8 md:mt-12 grid grid-cols-2 gap-4 md:gap-6 text-sm bg-black/40 backdrop-blur-sm p-4 md:p-6 rounded-lg border border-zinc-800/50">
                                <div class="flex flex-col gap-1">
                                    <div class="flex items-center gap-2 text-[#FFC520] font-bold mb-1">
                                        <i data-lucide="map-pin" class="w-4 h-4"></i> LOCATION
                                    </div>
                                    <p class="text-gray-300">Sarba, Jounieh<br>Facing Centre Versaille</p>
                                </div>
                                <div class="flex flex-col gap-1">
                                     <div class="flex items-center gap-2 text-[#FFC520] font-bold mb-1">
                                        <i data-lucide="clock" class="w-4 h-4"></i> HOURS
                                    </div>
                                    <p class="text-gray-300">Mon-Fri: 9am - 9pm<br>Sat: 9am - 3pm<br>Sun: Closed</p>
                                </div>
                            </div>
                        </div>

                        <!-- Right Side: Media Previews (Visible on Mobile now) -->
                        <div class="block space-y-6 mt-8 md:mt-0">
                            <!-- Video Preview Card -->
                            <div class="bg-zinc-900/80 backdrop-blur border border-zinc-800 p-3 rounded-xl transform rotate-1 md:rotate-2 hover:rotate-0 transition duration-500 shadow-2xl">
                                <div class="aspect-video bg-zinc-800 rounded-lg flex items-center justify-center relative group cursor-pointer overflow-hidden">
                                     <!-- REPLACED IMAGE WITH VIDEO AND PLAY FUNCTIONALITY -->
                                     <video id="preview-video" 
                                        class="w-full h-full object-cover opacity-70 transition duration-700" 
                                        playsinline 
                                        preload="metadata"
                                        poster="./Images/Pic3.png">
                                        <!-- Using a reliable public sample video for demonstration -->
                                        <source src="./Videos/Video1.MP4" type="video/mp4">
                                        Your browser does not support the video tag.
                                     </video>
                                     <div id="preview-overlay" onclick="playPreview()" class="absolute inset-0 flex items-center justify-center z-10 transition-opacity duration-300">
                                        <div class="w-14 h-14 bg-[#FFC520] rounded-full flex items-center justify-center group-hover:scale-110 transition shadow-lg">
                                            <i data-lucide="play" class="fill-black text-black ml-1 w-6 h-6"></i>
                                        </div>
                                     </div>
                                </div>
                                <div class="mt-3 flex justify-between items-center px-2">
                                    <span class="font-bold text-white tracking-tight">Introduction</span>
                                    <span class="text-[10px] bg-[#FFC520]/20 text-[#FFC520] px-2 py-1 rounded font-bold uppercase">Preview</span>
                                </div>
                            </div>

                            <!-- Social Card (UPDATED TO BE CLICKABLE) -->
                             <div class="bg-zinc-900/90 backdrop-blur border border-zinc-800 p-4 rounded-xl transform -rotate-1 md:-rotate-2 hover:rotate-0 transition duration-500 w-full md:w-3/4 ml-auto shadow-xl group">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 bg-gradient-to-tr from-yellow-500 via-[#FFC520] to-yellow-600 rounded-full flex items-center justify-center p-0.5">
                                        <div class="bg-black w-full h-full rounded-full flex overflow-hidden">
                                            <div class="bg-black w-full h-full rounded-full flex items-center justify-center">
                                            <img
                                                src="./InstaImages/ProfilePic.jpg"
                                                alt="Instagram"
                                                class="w-full h-full object-contain"
                                                />
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <p class="font-bold text-white leading-none">@Boxology</p>
                                        <p class="text-xs text-zinc-400">#yallaletsbox</p>
                                    </div>
                                    <!-- Follow Button as Link (Prevents bubbling to card click) -->
                                    <a href="https://www.instagram.com/boxology.lb/" target="_blank" onclick="event.stopPropagation()" class="ml-auto bg-blue-500 text-white text-xs font-bold px-3 py-1.5 rounded-full hover:bg-blue-600 transition flex items-center justify-center no-underline">Follow</a>
                                </div>
                                <div class="grid grid-cols-3 gap-2">
                                    <!-- Images as Links (Prevents bubbling to card click) -->
                                    <a href="https://www.instagram.com/reel/DP4Tq1LjAKY/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==" target="_blank" onclick="event.stopPropagation()" class="block aspect-square bg-zinc-800 rounded bg-[url('./InstaImages/Pic1.png')] bg-cover opacity-80 hover:opacity-100 transition hover:scale-105 duration-300"></a>
                                    <a href="https://www.instagram.com/reel/DQE3gFkDNrA/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==" target="_blank" onclick="event.stopPropagation()" class="block aspect-square bg-zinc-800 rounded bg-[url('./InstaImages/Pic2.png')] bg-cover opacity-80 hover:opacity-100 transition hover:scale-105 duration-300"></a>
                                    <a href="https://www.instagram.com/reel/DP1UT7YDEnh/?utm_source=ig_web_copy_link&igsh=MzRlODBiNWFlZA==" target="_blank" onclick="event.stopPropagation()" class="block aspect-square bg-zinc-800 rounded bg-[url('./InstaImages/Pic3.png')] bg-cover opacity-80 hover:opacity-100 transition hover:scale-105 duration-300"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- GALLERY SECTION -->
                <div class="bg-black py-16 border-t border-zinc-900">
                    <div class="max-w-6xl mx-auto px-4">
                        <div class="flex items-center gap-4 mb-8">
                             <div class="h-8 w-2 bg-[#FFC520] rounded-sm"></div>
                             <h2 class="text-3xl md:text-5xl font-black text-white italic tracking-tighter">INSIDE THE <span class="text-zinc-600">ARENA</span></h2>
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-4 md:grid-rows-2 gap-3 h-[800px] md:h-[500px]">
                            <!-- Main Feature (Video/Image) -->
                            <div class="col-span-2 row-span-2 md:col-span-2 md:row-span-2 relative group overflow-hidden rounded-xl border border-zinc-800 bg-zinc-900">
                                <video id="gym-tour-video" 
                                    class="w-full h-full object-cover opacity-60 group-hover:opacity-80 transition duration-500" 
                                    playsinline 
                                    preload="metadata"
                                    poster="./Images/Pic4.png">
                                    <source src="./Videos/Video1.MP4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div id="gym-tour-overlay" onclick="playGymTour()" class="absolute inset-0 flex items-center justify-center z-10 transition-opacity duration-300">
                                    <div class="w-16 h-16 bg-[#FFC520] rounded-full flex items-center justify-center cursor-pointer hover:scale-110 transition shadow-xl shadow-yellow-900/20">
                                        <i data-lucide="play" class="fill-black text-black ml-1 w-6 h-6"></i>
                                    </div>
                                </div>
                                <div class="absolute bottom-4 left-4 pointer-events-none z-20">
                                    <span class="bg-black/50 backdrop-blur text-white text-xs font-bold px-2 py-1 rounded uppercase border border-white/10">Gym Tour</span>
                                </div>
                            </div>
                            
                            <!-- Gallery Item 2 -->
                            <div class="col-span-1 md:col-span-1 md:row-span-1 relative group overflow-hidden rounded-xl border border-zinc-800">
                                <img src="./Images/Pic1.jpeg" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition duration-500">
                            </div>

                             <!-- Gallery Item 3 -->
                            <div class="col-span-1 md:col-span-1 md:row-span-2 relative group overflow-hidden rounded-xl border border-zinc-800">
                                <img src="./Images/Pic2.jpeg" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition duration-500">
                            </div>

                            <!-- Gallery Item 4 -->
                             <div class="col-span-2 md:col-span-1 md:row-span-1 relative group overflow-hidden rounded-xl border border-zinc-800">
                                <img src="./Images/Pic3.png" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition duration-500">
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderContact() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-black text-white italic mb-4">GET IN TOUCH</h2>
                        <p class="text-zinc-400 max-w-2xl mx-auto">Ready to start your journey? Contact us for private coaching or general inquiries.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- Contact Info -->
                        <div class="space-y-8">
                            <div class="bg-zinc-900 p-6 rounded-xl border border-zinc-800">
                                <h3 class="text-xl font-bold text-white mb-6">Contact Information</h3>
                                <div class="space-y-4">
                                    <div class="flex items-start gap-4">
                                        <div class="w-10 h-10 bg-[#FFC520]/10 rounded-lg flex items-center justify-center shrink-0">
                                            <i data-lucide="map-pin" class="text-[#FFC520] w-5 h-5"></i>
                                        </div>
                                        <div>
                                            <p class="text-white font-bold">Visit Us</p>
                                            <p class="text-zinc-400 text-sm">Sarba, Jounieh<br>Facing Centre Versaille</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4">
                                        <div class="w-10 h-10 bg-[#FFC520]/10 rounded-lg flex items-center justify-center shrink-0">
                                            <i data-lucide="phone" class="text-[#FFC520] w-5 h-5"></i>
                                        </div>
                                        <div>
                                            <p class="text-white font-bold">Call Us</p>
                                            <p class="text-zinc-400 text-sm">+961 71 711 721</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4">
                                        <div class="w-10 h-10 bg-[#FFC520]/10 rounded-lg flex items-center justify-center shrink-0">
                                            <i data-lucide="mail" class="text-[#FFC520] w-5 h-5"></i>
                                        </div>
                                        <div>
                                            <p class="text-white font-bold">Email Us</p>
                                            <p class="text-zinc-400 text-sm">info@boxology.com</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hours -->
                            <div class="bg-zinc-900 p-6 rounded-xl border border-zinc-800">
                                <h3 class="text-xl font-bold text-white mb-4">Gym Hours</h3>
                                <ul class="space-y-2 text-sm text-zinc-400">
                                    <li class="flex justify-between"><span>Monday - Friday</span> <span class="text-white">9:00 AM - 9:00 PM</span></li>
                                    <li class="flex justify-between"><span>Saturday</span> <span class="text-white">9:00 AM - 3:00 PM</span></li>
                                    <li class="flex justify-between"><span>Sunday</span> <span class="text-white">Closed</span></li>
                                </ul>
                            </div>
                        </div>

                        <!-- Contact Form -->
                        <div class="bg-zinc-900 p-8 rounded-xl border border-zinc-800">
                            <form onsubmit="handleContactSubmit(event)" class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-zinc-300 mb-2">Name</label>
                                    <input type="text" id="c-name" required pattern="[A-Za-z\s]+" title="Please enter letters only" class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none transition" placeholder="Your Name">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-zinc-300 mb-2">Message</label>
                                    <textarea id="c-message" required class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none transition h-32" placeholder="How can we help?"></textarea>
                                </div>
                                <button type="submit" class="w-full bg-[#FFC520] text-black font-bold py-4 rounded hover:bg-[#e0ac1c] transition flex items-center justify-center gap-2">
                                    Send Message <i data-lucide="send" class="w-4 h-4"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderShop() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="max-w-6xl mx-auto px-4 py-12">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-8 border-b border-zinc-800 pb-4 gap-4">
                        <div>
                            <h2 class="text-3xl font-black text-white italic">GYM GEAR</h2>
                            <p class="text-zinc-400 mt-2">Apparel and equipment for the dedicated.</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                        ${PRODUCTS.map(p => createProductCard(p)).join('')}
                    </div>
                </div>
            `;
        }

        function renderBundles() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="max-w-6xl mx-auto px-4 py-12">
                    <div class="text-center mb-8 md:mb-12">
                        <h2 class="text-3xl font-black text-white italic mb-4">PRIVATE TRAINING</h2>
                        <p class="text-zinc-400 max-w-2xl mx-auto">Master the sweet science with our certified coaches.</p>
                    </div>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
                        ${BUNDLES.map(b => createBundleCard(b)).join('')}
                    </div>
                </div>
            `;
        }

        function renderCart() {
            const container = document.getElementById('app-container');
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="max-w-4xl mx-auto px-4 py-12 text-center">
                        <div class="py-24 bg-zinc-900 rounded-xl border border-zinc-800">
                            <i data-lucide="shopping-cart" class="mx-auto text-zinc-600 w-12 h-12 mb-4"></i>
                            <p class="text-zinc-400 mb-6">Your cart is empty.</p>
                            <button onclick="router('shop')" class="text-[#FFC520] font-bold hover:underline p-2">Start Shopping</button>
                        </div>
                    </div>`;
                return;
            }

            let cartItemsHTML = cart.map((item, index) => `
                <div class="flex flex-col sm:flex-row gap-4 bg-zinc-900 p-4 rounded-lg border border-zinc-800 mb-4">
                    <div class="flex gap-4">
                        <div class="w-20 h-20 bg-zinc-800 rounded flex items-center justify-center shrink-0">
                            <i data-lucide="${item.icon}" class="text-zinc-500"></i>
                        </div>
                        <div class="flex-grow sm:hidden">
                            <h3 class="font-bold text-white line-clamp-1">${item.name}</h3>
                            <span class="font-bold text-white">${CURRENCY}${item.price * item.quantity}</span>
                        </div>
                    </div>
                    
                    <div class="flex-grow">
                        <div class="hidden sm:flex justify-between items-start">
                            <h3 class="font-bold text-white">${item.name}</h3>
                            <span class="font-bold text-white">${CURRENCY}${item.price * item.quantity}</span>
                        </div>
                        <p class="text-sm text-zinc-400 mb-4 sm:mb-2">${item.selectedColor ? `Color: ${item.selectedColor}` : (item.sessions + ' Sessions')}</p>
                        
                        <div class="flex items-center justify-between sm:justify-start gap-4 mt-2">
                            <div class="flex items-center bg-black rounded border border-zinc-700">
                                <button onclick="updateQty(${index}, -1)" class="p-2 sm:p-1 text-zinc-400 hover:text-white"><i data-lucide="minus" class="w-4 h-4 sm:w-3 sm:h-3"></i></button>
                                <span class="w-10 sm:w-8 text-center text-sm font-medium text-white">${item.quantity}</span>
                                <button onclick="updateQty(${index}, 1)" class="p-2 sm:p-1 text-zinc-400 hover:text-white"><i data-lucide="plus" class="w-4 h-4 sm:w-3 sm:h-3"></i></button>
                            </div>
                            <button onclick="removeFromCart(${index})" class="text-sm text-[#FFC520] hover:text-yellow-400 flex items-center gap-1 p-2">
                                <i data-lucide="trash-2" class="w-4 h-4 sm:w-3 sm:h-3"></i> <span class="sm:hidden">Remove</span><span class="hidden sm:inline">Remove</span>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = `
                <div class="max-w-4xl mx-auto px-4 py-12">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-2xl font-bold text-white">Your Cart</h2>
                        <button onclick="clearCart()" class="text-sm text-red-500 hover:text-red-400 font-bold flex items-center gap-2 px-3 py-2 bg-red-500/10 rounded-lg transition hover:bg-red-500/20">
                            <i data-lucide="trash-2" class="w-4 h-4"></i> Remove All
                        </button>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2">${cartItemsHTML}</div>
                        <div class="h-fit bg-zinc-900 p-6 rounded-lg border border-zinc-800">
                            <h3 class="font-bold text-white mb-4 text-lg">Order Summary</h3>
                            <div class="space-y-2 mb-6 text-sm text-zinc-300">
                                <div class="flex justify-between"><span>Subtotal</span><span>${CURRENCY}${total}</span></div>
                                <div class="flex justify-between"><span>Delivery</span><span>Free</span></div>
                                <div class="border-t border-zinc-700 pt-2 mt-2 flex justify-between text-white font-bold text-base">
                                    <span>Total</span><span>${CURRENCY}${total}</span>
                                </div>
                            </div>
                            <button onclick="router('checkout')" class="w-full bg-[#FFC520] text-black font-bold py-3 rounded hover:bg-[#e0ac1c] transition">Proceed to Checkout</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function clearCart() {
            cart = [];
            saveCart();
            renderCart();
            updateCartBadge();
            lucide.createIcons();
        }

        function renderCheckout() {
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const container = document.getElementById('app-container');
            const info = getCheckoutInfo();

            container.innerHTML = `
                <div class="max-w-2xl mx-auto px-4 py-12">
                    <button onclick="router('cart')" class="text-zinc-400 hover:text-white mb-6 flex items-center gap-2"> Back to Cart</button>
                    <div class="bg-zinc-900 p-8 rounded-xl border border-zinc-800">
                        <h2 class="text-2xl font-bold text-white mb-6">Cash on Delivery Checkout</h2>
                        <form onsubmit="handleCheckout(event)" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-zinc-300 mb-2">Full Name</label>
                                <input required type="text" id="fname" value="${info.name || ''}" oninput="saveCheckoutInput('name', this.value)" pattern="[A-Za-z\\s]+" title="Please enter letters only" class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none" placeholder="Your Name">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-zinc-300 mb-2">Phone Number</label>
                                <input required type="tel" id="fphone" value="${info.phone || ''}" oninput="saveCheckoutInput('phone', this.value)" pattern="[0-9]+" title="Please enter numbers only" class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none" placeholder="70123456">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-zinc-300 mb-2">Delivery Address</label>
                                <textarea required id="faddress" oninput="saveCheckoutInput('address', this.value)" class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none h-24" placeholder="City, Street, Building...">${info.address || ''}</textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-zinc-300 mb-2">Notes (Optional)</label>
                                <input type="text" id="fnotes" value="${info.notes || ''}" oninput="saveCheckoutInput('notes', this.value)" class="w-full bg-black border border-zinc-700 rounded p-3 text-white focus:border-[#FFC520] focus:outline-none">
                            </div>
                            <button type="submit" class="w-full bg-white text-black font-bold py-4 rounded hover:bg-zinc-200 transition mt-4">Complete Order (${CURRENCY}${total})</button>
                        </form>
                    </div>
                </div>
            `;
        }

        function renderSuccess() {
            if (!lastOrder) { router('home'); return; }

            let itemsList = lastOrder.items.map(item =>
                `<li class="flex justify-between">
                    <span>${item.quantity}x ${item.name} ${item.selectedColor ? `(${item.selectedColor})` : ''}</span>
                    <span>${CURRENCY}${item.price * item.quantity}</span>
                </li>`
            ).join('');

            const waLink = generateWhatsAppLink();

            document.getElementById('app-container').innerHTML = `
                <div class="max-w-2xl mx-auto px-4 py-16 text-center">
                    <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i data-lucide="check" class="text-green-500 w-10 h-10"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-white mb-4">Order Placed!</h2>
                    <p class="text-zinc-400 mb-8 max-w-md mx-auto">Thank you, ${lastOrder.customer.name}. To finalize your order, please send the summary via WhatsApp.</p>
                    
                    <div class="bg-zinc-900 p-6 rounded-lg border border-zinc-800 text-left mb-8 max-w-sm mx-auto">
                        <h3 class="font-bold text-white mb-4 border-b border-zinc-800 pb-2">Order Summary #${lastOrder.id}</h3>
                        <ul class="space-y-2 mb-4 text-sm text-zinc-300">${itemsList}</ul>
                        <div class="flex justify-between text-white font-bold pt-2 border-t border-zinc-800">
                            <span>Total</span><span>${CURRENCY}${lastOrder.total}</span>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <!-- Added onclick="completeOrder()" to clear cart only when clicked -->
                        <a href="${waLink}" target="_blank" onclick="completeOrder()" class="flex items-center justify-center gap-2 bg-[#25D366] text-black font-bold py-3 px-8 rounded hover:bg-[#20bd5a] transition">
                            <i data-lucide="message-circle" class="w-5 h-5"></i> Send via WhatsApp
                        </a>
                        <button onclick="router('home')" class="bg-transparent border border-zinc-700 text-zinc-300 font-bold py-3 px-8 rounded hover:border-white hover:text-white transition">Return Home</button>
                    </div>
                </div>
            `;
        }

        // --- HELPER COMPONENTS ---

        function createProductCard(product) {
            // Default select first color
            const defaultColor = product.colors ? product.colors[0] : null;
            
            // Get initial image for the default color
            const initialImage = product.images ? product.images[defaultColor][0] : '';
            const showArrows = product.images && product.images[defaultColor].length > 1;

            // Generate HTML for color buttons
            let colorButtons = '';
            if (product.colors) {
                colorButtons = `<div class="mb-4">
                    <label class="text-xs text-zinc-500 uppercase font-semibold mb-2 block">Select Color</label>
                    <div class="flex gap-2" id="colors-${product.id}">
                        ${product.colors.map((c, i) => `
                            <button onclick="selectColor('${product.id}', '${c}')" 
                                class="color-btn-${product.id} h-8 px-3 rounded text-xs font-medium border transition-all ${i === 0 ? 'border-[#FFC520] bg-[#FFC520]/10 text-[#FFC520]' : 'border-zinc-700 text-zinc-400'}"
                                data-color="${c}">
                                ${c}
                            </button>
                        `).join('')}
                    </div>
                </div>`;
            }

            return `
            <div class="bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden shadow-lg flex flex-col mx-6 md:mx-0">
                <div class="h-96 md:h-48 bg-zinc-800 flex items-center justify-center relative overflow-hidden group">
                    <div class="relative w-full h-full">
                        <img id="img-${product.id}" src="${initialImage}" class="w-full h-full object-cover transition duration-300" data-current-index="0">
                        
                        <!-- Navigation Arrows (Hidden if single image) -->
                        <button id="prev-${product.id}" onclick="changeImage('${product.id}', -1)" 
                            class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70 transition ${showArrows ? '' : 'hidden'}">
                            <i data-lucide="chevron-left" class="w-5 h-5"></i>
                        </button>
                        <button id="next-${product.id}" onclick="changeImage('${product.id}', 1)" 
                            class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70 transition ${showArrows ? '' : 'hidden'}">
                            <i data-lucide="chevron-right" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <span class="absolute bottom-3 left-3 bg-[#FFC520] text-black text-xs font-bold px-2 py-1 rounded uppercase tracking-wider z-10">${product.category}</span>
                </div>
                <div class="p-5 flex flex-col flex-grow">
                    <div class="flex justify-between items-start mb-2">
                        <h3 class="text-lg font-bold text-white leading-tight">${product.name}</h3>
                        <span class="text-[#FFC520] font-bold">${CURRENCY}${product.price}</span>
                    </div>
                    <p class="text-zinc-400 text-sm mb-4 flex-grow">${product.description}</p>
                    ${colorButtons}
                    <button onclick="addToCart('${product.id}')" id="add-btn-${product.id}" data-selected-color="${defaultColor || ''}" class="w-full bg-white text-black font-bold py-3 rounded hover:bg-zinc-200 transition flex items-center justify-center gap-2">
                        <i data-lucide="plus" class="w-4 h-4"></i> Add to Cart
                    </button>
                </div>
            </div>`;
        }

        function createBundleCard(bundle) {
            let badge = '';
            if (bundle.sessions === 12) badge = 'MOST POPULAR';
            if (bundle.sessions === 20) badge = 'BEST VALUE';

            return `
            <div class="relative bg-zinc-900 border border-zinc-700 rounded-xl p-6 hover:border-[#FFC520] transition-all">
                ${badge ? `<div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-[#FFC520] text-black text-xs font-bold px-3 py-1 rounded-full shadow-lg whitespace-nowrap">${badge}</div>` : ''}
                <div class="text-center mb-6">
                    <h3 class="text-xl font-bold text-white mb-2">${bundle.name}</h3>
                    <div class="text-4xl font-black text-[#FFC520] mb-1">
                        ${CURRENCY}${bundle.price}
                        ${bundle.oldPrice ? `<span class="text-lg text-zinc-500 line-through font-normal ml-2">${CURRENCY}${bundle.oldPrice}</span>` : ''}
                    </div>
                    <p class="text-zinc-400 text-sm">${bundle.sessions} Sessions</p>
                </div>
                <ul class="space-y-3 mb-8 text-sm text-zinc-300">
                    <li class="flex items-start gap-3"><i data-lucide="check" class="text-green-500 w-4 h-4 mt-1"></i> One-on-one coaching</li>
                    <li class="flex items-start gap-3"><i data-lucide="check" class="text-green-500 w-4 h-4 mt-1"></i> Customized training plan</li>
                </ul>
                <button onclick="bookBundle('${bundle.id}')" class="w-full bg-[#FFC520] text-black font-bold py-3 rounded hover:bg-[#e0ac1c] transition flex items-center justify-center gap-2">
                    Book Now <i data-lucide="message-circle" class="w-5 h-5"></i>
                </button>
            </div>`;
        }

        // --- INTERACTION LOGIC ---

        function playPreview() {
            const video = document.getElementById('preview-video');
            const overlay = document.getElementById('preview-overlay');
            
            if (video.paused) {
                video.play();
                video.muted = false; // Unmute on click
                video.classList.remove('opacity-70');
                // Removed the scaling effect on play so the video doesn't jitter
                overlay.style.display = 'none'; // Hide overlay
                video.controls = true; // Show native controls
            }
        }

        function playGymTour() {
            const video = document.getElementById('gym-tour-video');
            const overlay = document.getElementById('gym-tour-overlay');
            
            if (video.paused) {
                video.play();
                video.muted = false;
                video.classList.remove('opacity-60');
                video.classList.remove('group-hover:opacity-80');
                overlay.style.display = 'none';
                video.controls = true;
            }
        }

        function selectColor(prodId, color) {
            // Update UI buttons
            const btns = document.querySelectorAll(`.color-btn-${prodId}`);
            btns.forEach(btn => {
                if (btn.dataset.color === color) {
                    btn.className = `color-btn-${prodId} h-8 px-3 rounded text-xs font-medium border transition-all border-[#FFC520] bg-[#FFC520]/10 text-[#FFC520]`;
                } else {
                    btn.className = `color-btn-${prodId} h-8 px-3 rounded text-xs font-medium border transition-all border-zinc-700 text-zinc-400 hover:border-zinc-500`;
                }
            });
            // Update add button data
            const addBtn = document.getElementById(`add-btn-${prodId}`);
            addBtn.setAttribute('data-selected-color', color);

            // Update Image Logic
            const product = PRODUCTS.find(p => p.id === prodId);
            const images = product.images[color];
            const imgElement = document.getElementById(`img-${prodId}`);
            const prevBtn = document.getElementById(`prev-${prodId}`);
            const nextBtn = document.getElementById(`next-${prodId}`);

            // Reset to first image
            imgElement.src = images[0];
            imgElement.dataset.currentIndex = 0;

            // Show/Hide arrows based on image count
            if (images.length > 1) {
                prevBtn.classList.remove('hidden');
                nextBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
                nextBtn.classList.add('hidden');
            }
        }

        function changeImage(prodId, direction) {
            const product = PRODUCTS.find(p => p.id === prodId);
            const addBtn = document.getElementById(`add-btn-${prodId}`);
            const currentColor = addBtn.getAttribute('data-selected-color');
            const images = product.images[currentColor];
            const imgElement = document.getElementById(`img-${prodId}`);
            
            let currentIndex = parseInt(imgElement.dataset.currentIndex || 0);
            
            // Calculate new index
            let newIndex = currentIndex + direction;
            if (newIndex >= images.length) newIndex = 0;
            if (newIndex < 0) newIndex = images.length - 1;

            // Update DOM
            imgElement.src = images[newIndex];
            imgElement.dataset.currentIndex = newIndex;
        }

        function addToCart(id) {
            // Find item
            let item = PRODUCTS.find(p => p.id === id) || BUNDLES.find(b => b.id === id);

            // Get color if applicable
            let color = null;
            const btn = document.getElementById(`add-btn-${id}`);
            if (btn && btn.getAttribute('data-selected-color')) {
                color = btn.getAttribute('data-selected-color');
            }

            // Add logic
            const existing = cart.find(i => i.id === id && i.selectedColor === color);
            if (existing) {
                existing.quantity++;
            } else {
                cart.push({ ...item, quantity: 1, selectedColor: color });
            }

            saveCart(); // Save cart to local storage
            updateCartBadge();

            // Visual feedback
            if (btn) {
                // Clear any existing timeout to prevent flickering or early reset
                if (btn.feedbackTimeout) {
                    clearTimeout(btn.feedbackTimeout);
                }

                btn.innerHTML = `<i data-lucide="check" class="w-4 h-4"></i> Added`;
                lucide.createIcons();
                
                // Store timeout ID on the element to manage rapid clicks
                btn.feedbackTimeout = setTimeout(() => { 
                    btn.innerHTML = `<i data-lucide="plus" class="w-4 h-4"></i> Add to Cart`; 
                    lucide.createIcons(); 
                    btn.feedbackTimeout = null;
                }, 1000);
            } else {
                router('cart'); // If added from bundles page, maybe go to cart or just stay
            }
        }

        function bookBundle(id) {
            const bundle = BUNDLES.find(b => b.id === id);
            if (!bundle) return;

            const message = `Hi, Id like to book private boxing training. The bundle I chose is ${bundle.name}.`;
            const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        function updateQty(index, delta) {
            cart[index].quantity += delta;
            if (cart[index].quantity < 1) cart[index].quantity = 1;
            saveCart();
            renderCart();
            updateCartBadge();
            lucide.createIcons();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            saveCart();
            renderCart();
            updateCartBadge();
            lucide.createIcons();
        }

        function updateCartBadge() {
            const count = cart.reduce((sum, i) => sum + i.quantity, 0);
            // Updated to handle specific IDs for Desktop, Mobile Top Bar, and Mobile Menu
            const badges = [
                document.getElementById('cart-badge-desktop'), 
                document.getElementById('cart-badge-mobile'),
                document.getElementById('cart-badge-menu')
            ];
            
            badges.forEach(b => {
                if (b) {
                    b.innerText = count;
                    if (count > 0) {
                        b.classList.remove('hidden');
                        // Ensure flex is active if it was hidden
                        if(b.classList.contains('flex') === false && b.classList.contains('absolute') === false) {
                             // For the menu badge which might use inline-block or similar if not flex
                             // The menu badge has specific classes, let's just stick to toggling hidden
                        }
                    } else {
                        b.classList.add('hidden');
                    }
                }
            });
        }

        function handleCheckout(e) {
            e.preventDefault();
            const formData = {
                name: document.getElementById('fname').value,
                phone: document.getElementById('fphone').value,
                address: document.getElementById('faddress').value,
                notes: document.getElementById('fnotes').value
            };

            lastOrder = {
                id: Math.floor(Math.random() * 10000),
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                customer: formData
            };

            // Removed cart clearing here. Cart is now cleared in completeOrder()
            router('success');
        }

        function completeOrder() {
            cart = [];
            saveCart(); // Update local storage (clear cart)
            clearCheckoutInfo(); // Clear checkout form data
            updateCartBadge();
        }

        function generateWhatsAppLink() {
            if (!lastOrder) return '#';

            let message = `*NEW ORDER*\n`;
            message += `\n`;
            message += `*Order ID:* #${lastOrder.id}\n\n`;

            message += `*Customer Information*\n`;
            message += `Name: ${lastOrder.customer.name}\n`;
            message += `Phone: ${lastOrder.customer.phone}\n`;
            message += `Address: ${lastOrder.customer.address}\n\n`;

            message += `*Order Details*\n`;
            message += `\n`;

            lastOrder.items.forEach(item => {
                message += ` ${item.quantity} x ${item.name}`;
                if (item.selectedColor) message += ` (${item.selectedColor})`;
                message += `\n  Price: ${CURRENCY}${item.price * item.quantity}\n`;
            });

            message += `\n\n`;
            message += `*Total:* ${CURRENCY}${lastOrder.total}\n`;
            message += `*Payment Method:* Cash on Delivery\n`;

            if (lastOrder.customer.notes) {
                message += `\n*Notes:*\n${lastOrder.customer.notes}\n`;
            }

            return `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
        }

        function handleContactSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('c-name').value;
            const msg = document.getElementById('c-message').value;
            const text = `Hi, I am ${name}. ${msg}`;
            const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
    </script>
</body>

</html>